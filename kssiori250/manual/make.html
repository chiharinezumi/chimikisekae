<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" href="common.css" type="text/css">
<title>きせかえシステム"siori" マニュアル</title>
</head>
<body>
<div id="all">

<h1>着せ替えの作り方</h1>

<p>着せ替えゲームの基本的な作り方について説明します。</p>

<h2>作成の手順</h2>

<h3>1. ファイルを用意します</h3>

<p>はじめに、着せ替えゲーム用のフォルダを作成します。
そのフォルダの中に着せ替えで使う画像（以下、この画像を「セル」と呼びます）全てと、下記の３つのファイルを入れます。</p>

<ul class="shrink">
<li><em class="file">siori.js</em></li>
<li><em class="file">index.html</em></li>
<li><em class="file">tool.html</em></li>
</ul>

<p>セルの画像形式は JPEG, GIF, PNG が使用できます。服などのセルは透明部分が必要になるので、GIF か PNG 形式を使用します。
通常のセルはPNG形式（フルカラーも可）を使用して、アニメーションが必要なセルのみGIFを使用することをおすすめします。
本バージョンは IE6 においてもフルカラーPNGを表示することが可能になりました。</p>

<h3>2. しおりのどうぐばこを起動します</h3>

<p><em class="file">tool.html</em> をブラウザで開いて、しおりのどうぐばこを起動します。
起動するとメインメニューが表示されます。</p>

<p>大きな貼り付けフォームがありますが、新規作成の場合は何も入力せず空欄のままで構いません。
セット選択が「<em>セットNo.0</em>」の「<em>セル</em>」になっているのを確認して、
「<em>編集モードへ移行する</em>」をクリックします。</p>

<p>編集モードへ移行すると、新規作成の場合は右側のパネルに下図のメッセージが表示されます。
メッセージをクリックして、セルの情報入力ダイアログを表示します。ファイルドラッグ機能に対応するブラウザの場合は、
メッセージの上に画像ファイルをドラッグ＆ドロップしてセルを新規作成することができます。</p>

<p><img src="img/cel_create.png" width="141" height="94" alt="新規作成メッセージ"></p>

<h3>3. セルの情報を入力します</h3>

<p>セルの新規作成時や編集時に、下図のセルの情報入力ダイアログが表示されます。</p>

<p><img src="img/cel_dialog.png" width="528" height="204" alt="セルの情報入力ダイアログ"></p>

<p>ファイル名の欄に表示したい画像のファイル名を指定します。
ファイル名を直接入力するか、「参照」ボタンを押してファイルダイアログから画像を選びます。
その他の欄や詳細については、<a href="#sec-input">セルの情報入力について</a>をご覧ください。
入力が終わったらＯＫを押します。</p>

<p>リストパネルから作成されたセルの項目をクリックすると、セル編集メニューが表示されます。</p>

<p><img src="img/cel_edit.png" width="141" height="224" alt="セル編集メニュー"></p>

<p>入力を間違えた場合は「<em>変更</em>」を選ぶと、再度入力できます。
「<em>新規作成</em>」を選ぶと、新しいセルを追加作成します。
セルの重なる順番を替えるには「<em>切り取り</em>」を選んで切り取って、挿入したい位置で「<em>貼り付け</em>」を選びます。
またはこのメニューを閉じている状態で項目をドラッグすると順番を並び替えることができます。</p>

<h3>4. セルを配置してデータを貼り付けます</h3>

<p>セルをドラッグして配置を行います。編集が終わったらパネルの「<em>メインメニュー</em>」をクリックします。
メインメニューに戻ると、貼り付けフォームにデータが表示されます。このフォームのデータを<em>全て選択してコピー</em>します。</p>

<p>次に <em class="file">index.html</em>（テンプレートファイル）をメモ帳などのテキストエディタで開き、
先ほどコピーしたデータを下記の場所に貼り付けてください。
貼り付けが終わったら <em class="file">index.html</em> を保存します。</p>

<pre>
/**************************************************************************/
/*   ↓ しおりのどうぐばこのフォームデータをここに貼り付けてください ↓   */
/**************************************************************************/

<em class="marker">(この位置に貼り付けます)</em>
</pre>

<p>以上で作成終了です。<em class="file">index.html</em> をブラウザで開いて、着せ替えが遊べたら完成です。</p>

<h3>補足</h3>

<ul>
<li>テンプレートファイルは、好みに合わせて自由に編集していただいて構いません。</li>
<li>テンプレートファイルに貼り付けしたデータを全てコピーして、
しおりのどうぐばこのフォームに貼り付けることで、データ作成後の再編集が行えます。
再編集したデータをテンプレートファイルに再び貼り付ける場合は、
以前の貼り付けデータが残らないように、全て削除してから貼り付けてください。</li>
<li>しおりのどうぐばこは遊ぶときには必要ありません。完成後にネットなどで公開する場合は、
<em class="file">tool.html</em> を削除して公開することを強くおすすめします（再編集する場合は、再びご用意ください）。</li>
</ul>

<h2 id="sec-input">セルの情報入力について</h2>

<p>セルの新規作成／編集時に下図のダイアログが表示されます。入力例は下図の通りです。
ファイル名以外の項目は必要がない場合は空欄のままで構いません。</p>

<p><img src="img/cel_dialog_eg.png" width="528" height="204" alt="セルの情報入力ダイアログ"></p>

<dl class="kaisetsu">
<dt>ファイル名 <em class="marker">指定必須</em></dt>
<dd>
<p>画像のファイル名を指定します。省略はできません。「http://」からのフルURL指定も可能です。</p>
<p>参照ボタンを押すとファイルダイアログが表示され、リストから画像ファイルを選ぶことができます。
但し選択できるのは、セキュリティの制限のため <em class="file">tool.html</em> と同じフォルダにある画像のみとなります。
参照ボタンはブラウザのファイルアップロード機能を利用していますが、ファイル名の取得のみに使用しており、
しおりのどうぐばこがアップロードすることは一切ありません。</p>
</dd>

<dt>グループ名</dt>
<dd>
<p>セルをグループ化する場合に指定します。グループ化すると複数のセルを一緒に動かすことができます。
例えば服のセルに裏地や襟のセルを作ってグループ化すると、服をよりリアルに表現できます。
<em>グループ化したいセルに同じグループ名</em>を指定します。</p>

<ul>
<li>グループ名は半角英数字（0〜9 A〜Z a〜z と「_」）のみで指定して、なるべく短い名前にすることをおすすめします。
他の文字を使用すると正常に動作しなくなる可能性があります。</li>
<li>グループ化できるセルの数に制限はありませんが、数が多いと処理が重くなるので、１つのグループにつき数個程度に留めておいたほうが良いでしょう。 </li>
</ul>

<p>一覧ボタンを押すと下図のサブダイアログが表示され、現在使用しているグループ名の一覧がリストアップされます。
一度入力したグループ名はリストから選ぶことが可能になり、入力の手間を軽減できます。
リセットを選択すると、グループ名を削除します。</p>

<p><img src="img/name_dialog.png" width="228" height="334" alt="グループ名入力ダイアログ"></p>

<dt>クリック数</dt>
<dd>
<p>セルを固定する場合は 1 以上の数値を半角で指定します。固定せずに自由に動かす場合は空欄にします。
指定した回数がクリックされるまではセルが動かなくなります。1000 などの大きな数値を指定することで、実質的に完全に固定できます。</p>
<p>グループ化されたセルでは、番号が一番小さいセルのみの設定が有効になります。
それ以外のセルに指定した場合は、しおりのどうぐばこが自動修正するので、実際にはどのセルに指定しても問題はありません。</p>
<p>しおりのどうぐばこでの編集作業中には効果は現れません。テンプレートファイルの貼り付け後に設定が有効になります。</p>
</dd>

<dt>コメント</dt>
<dd>コメントを表示する場合に指定します。マウスポインタをセルの上に乗せたときに、ポップアップして表示されます。</dd>
</dl>

<h3>補足</h3>

<ul>
<li>ダイアログでは、Escキーを押すとキャンセル、テキストフォーム内でEnterキーを押すとOKを実行します。</li>
<li><p>セルの情報入力では次の文字は使用できません。</p>
<pre>
半角スペース 全角スペース \ &lt; &gt; " ' , ;
</pre>
</li>
</ul>

<h2 id="sec-set">セットについて</h2>

<p>セットとは、セルの位置と表示状態を記録することができる機能です。最大５つまでのセットを設定することができます。
セットを切り替えると、表示するキャラクターを変更したり、着せる服を変えることができます。</p>

<p>セット０は、ゲーム開始時に最初に表示しますので、少なくともセット０（セル）の設定が必要です。
セットには（セル）と（スナップ）の２種類があります。</p>

<h3>（セル）</h3>

<p>セルの位置と表示状態を設定します。遊ぶ時は（セル）に設定した通りに表示されます。</p>

<h3>（スナップ）</h3>

<p>スナップとは、セルをドラッグしてドロップした時に、多少位置がずれていても指定した位置に吸着する機能です。
（スナップ）にはセルを吸着する位置を設定します。吸着する必要がない場合は（スナップ）の設定は不要です。</p>

<p>（セル）と（スナップ）は、セットごとにペアになっています。
例えば「セット１（セル）」のスナップ設定は「セット１（スナップ）」で行います。</p>

<p>スナップをキャラクターに対して設定すると、服を着せやすくすることができます。設定の方法は下図の通りです。</p>

<p><img src="img/snap_eg.png" width="722" height="400" alt="スナップの設定例"></p>

<ul class="shrink">
<li>（セル）と（スナップ）の両方で、キャラクターの位置を同一にそろえます。</li>
<li>（セル）では、遊ぶ時に表示される服の位置を設定します。</li>
<li>（スナップ）では、キャラクターに全ての服を着せます。</li>
</ul>

<h3>（スナップ）の補足</h3>

<ul>
<li>（スナップ）のセルは通常全て表示状態にします。非表示にしたセルはスナップが設定されません。
非表示にすることで、一部のセルだけをスナップしないようにすることができます。</li>
<li>ちょっと裏技ですが、スナップが１種類だけで良い場合は、
セット０（スナップ）を設定するだけで、全セットのセルが共通にスナップされます
（スナップが２種類以上の場合は、使用セット全ての分に設定が必要です）。</li>
</ul>

<h3>セット全般の補足</h3>

<ul>
<li>セットはセルの位置と表示状態を個別に設定できますが、セル自体は全セット共通で使用します。
そのためセルの追加／削除などの編集は、全セットに影響します。</li>
<li>特定のセットで非表示にしたいセルは、削除せずに非表示にします。削除すると全てのセットで表示されなくなります。</li>
<li>新規作成したセルは、初期状態では全セットで表示します。表示したくないセットがある場合は、非表示に切り替える必要があります。</li>
</ul>

<h2>動作設定について</h2>

<p>テンプレートファイルの設定を変更すると、遊ぶ時の動作設定を行うことができます。</p>

<h3>設定項目</h3>

<dl class="kaisetsu">
<dt>conf.snapRange</dt>
<dd>セルをスナップする範囲を設定します。単位はピクセルです。数が大きいほどスナップする範囲が広がります。初期値は20です。
（例: 10を設定すると、スナップ位置が X=100 Y=100 のセルは、X=90〜110 Y=90〜110 の範囲にある場合にスナップされます）</dd>

<dt>conf.titleDelay</dt>
<dd>タイトルの表示時間を設定します。1000で１秒になります。</dd>
</dl>

<h3>タイトルの変更</h3>

<p>起動時のセルの読み込み中にタイトルが表示されます。タイトルを画像に変更する場合は、次のようにします。</p>

<pre class="sample">
&lt;!-- タイトルここから（変更／削除可能です）--&gt;
&lt;div id="title"&gt;
&lt;img src="(画像ファイル名)" width="(横サイズ)" height="(縦サイズ)" alt=""&gt;
&lt;/div&gt;
&lt;!-- タイトルここまで --&gt;
</pre>

<p>次のようにすると、タイトルを表示しないようにすることができます。</p>

<pre class="sample">
&lt;!-- タイトルここから（変更／削除可能です）--&gt;
<em class="marker">（この中の行を全部削除します）</em>
&lt;!-- タイトルここまで --&gt;
</pre>

<p class="nav-tail"><a href="toc.html">目次に戻ります</a></p>

<hr>
<address>
Copyright &copy; 2011 by <a href="http://sei.sakuraweb.com/">みなみせい</a> All Rights Reserved.
</address>

</div><!-- /#all -->
</body>
</html>
